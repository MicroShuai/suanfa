<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿæ’åºç®—æ³•å¯è§†åŒ–æ¼”ç¤º</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        
        .page-container {
            display: flex;
            gap: 20px;
            max-width: 2000px; /* ä»1800pxå¢åŠ åˆ°2000px */
            margin: 0 auto; /* æ•´ä¸ªé¡µé¢å±…ä¸­ */
            justify-content: center;
        }
        
        .left-menu {
            width: 250px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .main-container {
            flex: 0 0 1200px; /* ä»1000pxå¢åŠ åˆ°1200px */
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .sidebar {
            width: 450px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            max-height: 95vh;
            overflow-y: auto;
            position: sticky;
            top: 20px;
            text-align: left;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            width: 100%;
            font-size: 28px;
        }
        
        .algorithm-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .algorithm-item {
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background-color: #f8f9fa;
        }
        
        .algorithm-item:hover {
            background-color: #e9ecef;
            transform: translateX(5px);
        }
        
        .algorithm-item.active {
            background-color: #007bff;
            color: white;
            border-color: #0056b3;
            font-weight: bold;
        }
        
        .algorithm-item .name {
            font-size: 14px;
            font-weight: 500;
        }
        
        .algorithm-item .complexity {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 4px;
        }
        
        .left-menu h3 {
            color: #333;
            font-size: 18px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        
        #chart {
            width: 100%;
            height: 63vh; /* ä½¿ç”¨è§†çª—é«˜åº¦çš„63% */
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            background-color: #e3f2fd;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            color: #1976d2;
        }
        
        .controls {
            margin-top: 20px;
            text-align: center;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .info {
            margin-top: 0;
            padding: 0;
            background-color: transparent;
            border: none;
        }
        
        .sidebar h3 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .sidebar h4 {
            color: #555;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .sidebar .algorithm-section {
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .sidebar .core-idea-box {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-bottom: 20px;
        }
        
        .sidebar .features-box {
            background-color: #d1ecf1;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            margin-top: 20px;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1600px) {
            .page-container {
                flex-direction: column;
                align-items: center;
                padding: 10px;
            }
            
            .left-menu {
                width: 100%;
                max-width: 1200px; /* å“åº”å¼æ—¶ä¹Ÿå¢åŠ æœ€å¤§å®½åº¦ */
                position: static;
                order: -1;
            }
            
            .main-container {
                flex: none;
                width: 100%;
                max-width: 1200px; /* å“åº”å¼æ—¶ä¹Ÿå¢åŠ æœ€å¤§å®½åº¦ */
            }
            
            .sidebar {
                width: 100%;
                max-width: 1200px; /* å“åº”å¼æ—¶ä¹Ÿå¢åŠ æœ€å¤§å®½åº¦ */
                max-height: none;
                overflow-y: visible;
                position: static;
            }
            
            .algorithm-list {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .algorithm-item {
                flex: 1;
                min-width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- å·¦ä¾§ç®—æ³•é€‰æ‹©èœå• -->
        <div class="left-menu">
            <h3>ğŸ” é€‰æ‹©æ’åºç®—æ³•</h3>
            <ul class="algorithm-list" id="algorithmList">
                <li class="algorithm-item active" data-algorithm="quickSort">
                    <div class="name">å¿«é€Ÿæ’åº</div>
                    <div class="complexity">O(n log n)</div>
                </li>
                <li class="algorithm-item" data-algorithm="bubbleSort">
                    <div class="name">å†’æ³¡æ’åº</div>
                    <div class="complexity">O(nÂ²)</div>
                </li>
                <li class="algorithm-item" data-algorithm="insertionSort">
                    <div class="name">ç›´æ¥æ’å…¥æ’åº</div>
                    <div class="complexity">O(nÂ²)</div>
                </li>
                <li class="algorithm-item" data-algorithm="selectionSort">
                    <div class="name">ç›´æ¥é€‰æ‹©æ’åº</div>
                    <div class="complexity">O(nÂ²)</div>
                </li>
                <li class="algorithm-item" data-algorithm="mergeSort">
                    <div class="name">å½’å¹¶æ’åº</div>
                    <div class="complexity">O(n log n)</div>
                </li>
                <li class="algorithm-item" data-algorithm="heapSort">
                    <div class="name">å †æ’åº</div>
                    <div class="complexity">O(n log n)</div>
                </li>
                <li class="algorithm-item" data-algorithm="shellSort">
                    <div class="name">å¸Œå°”æ’åº</div>
                    <div class="complexity">O(n^1.3)~O(nÂ²)</div>
                </li>
            </ul>
        </div>
        
        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="main-container">
            <h1>æ’åºç®—æ³•å¯è§†åŒ–æ¼”ç¤º</h1>
            
            <!-- ç®—æ³•ä¿¡æ¯å¡ç‰‡ -->
            <div id="algorithmInfo" style="margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
            
            <div class="status" id="status">é€‰æ‹©æ’åºç®—æ³•å¹¶ç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º</div>
            <div id="chart"></div>
            
            <div class="controls">
                <button id="startBtn">å¼€å§‹æ’åº</button>
                <button id="pauseBtn" disabled>æš‚åœ</button>
                <button id="resumeBtn" disabled>ç»§ç»­</button>
                <button id="resetBtn">é‡æ–°ç”Ÿæˆæ•°æ®</button>
                <button id="speedBtn">è°ƒæ•´é€Ÿåº¦</button>
            </div>
        </div>

        <!-- å³ä¾§ç®—æ³•è¯´æ˜é¢æ¿ -->
        <div class="sidebar">
            <div class="info">
                <div id="algorithmDetails">
                    <!-- åŠ¨æ€ç®—æ³•è¯¦æƒ…å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
                
                <h4>ğŸ“Š é¢œè‰²å›¾ä¾‹è¯´æ˜ï¼š</h4>
                <ul id="colorLegend">
                    <li><span style="color: #f44336; font-weight: bold;">ğŸ”´ çº¢è‰²</span>ï¼šå½“å‰åŸºå‡†å…ƒç´ ï¼ˆPivotï¼‰</li>
                    <li><span style="color: #ff9800; font-weight: bold;">ğŸŸ¡ æ©™è‰²</span>ï¼šæ­£åœ¨ä¸åŸºå‡†æ¯”è¾ƒçš„å…ƒç´ </li>
                    <li><span style="color: #4caf50; font-weight: bold;">ğŸŸ¢ ç»¿è‰²</span>ï¼šå·²åˆ†åŒºåˆ°æ­£ç¡®ä½ç½®çš„å…ƒç´ </li>
                    <li><span style="color: #2196f3; font-weight: bold;">ğŸ”µ è“è‰²</span>ï¼šå¾…å¤„ç†çš„å…ƒç´ </li>
                    <li><span style="color: #9c27b0; font-weight: bold;">ğŸŸ£ ç´«è‰²</span>ï¼šå·²å®Œå…¨æ’åºçš„éƒ¨åˆ†</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–EChartså®ä¾‹
        var myChart = echarts.init(document.getElementById('chart'));
        
        // æ’åºç®—æ³•ä¿¡æ¯æ•°æ®åº“
        const algorithmsInfo = {
            quickSort: {
                name: 'å¿«é€Ÿæ’åº',
                timeComplexity: 'O(n log n)',
                stability: 'ä¸ç¨³å®š',
                stabilityReason: 'åœ¨åˆ†åŒºè¿‡ç¨‹ä¸­ï¼Œç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®å¯èƒ½ä¼šæ”¹å˜ã€‚å½“äº¤æ¢å…ƒç´ æ—¶ï¼ŒåŸæœ¬åœ¨å‰é¢çš„ç›¸ç­‰å…ƒç´ å¯èƒ½è¢«ç§»åˆ°åé¢',
                advantages: 'æ•ˆç‡é«˜ï¼Œå¸¸ç”¨',
                disadvantages: 'æœ€åé€€åŒ–ä¸ºO(nÂ²)ï¼Œä¸ç¨³å®š',
                coreIdea: 'åˆ†æ²»æ³• (Divide and Conquer)',
                description: 'é€‰æ‹©ä¸€ä¸ª"åŸºå‡†å…ƒç´ "ï¼Œå°†æ•°ç»„åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé€’å½’æ’åº',
                steps: [
                    'é€‰æ‹©åŸºå‡†ï¼šé€šå¸¸é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†',
                    'åˆ†åŒºæ“ä½œï¼šé‡æ–°æ’åˆ—æ•°ç»„ï¼Œä½¿å°å…ƒç´ åœ¨åŸºå‡†å·¦è¾¹ï¼Œå¤§å…ƒç´ åœ¨å³è¾¹',
                    'ç¡®å®šä½ç½®ï¼šåŸºå‡†å…ƒç´ ç°åœ¨å¤„äºæœ€ç»ˆæ’åºåçš„æ­£ç¡®ä½ç½®',
                    'é€’å½’å¤„ç†ï¼šå¯¹åŸºå‡†å·¦è¾¹å’Œå³è¾¹çš„å­æ•°ç»„é‡å¤æ‰§è¡Œä¸Šè¿°è¿‡ç¨‹',
                    'é€’å½’ç»ˆæ­¢ï¼šå½“å­æ•°ç»„é•¿åº¦ä¸º0æˆ–1æ—¶ï¼Œæ’åºå®Œæˆ'
                ],
                colors: {
                    pivot: { color: '#f44336', name: 'åŸºå‡†å…ƒç´ ' },
                    comparing: { color: '#ff9800', name: 'æ­£åœ¨æ¯”è¾ƒçš„å…ƒç´ ' },
                    partitioned: { color: '#4caf50', name: 'å·²åˆ†åŒºçš„å…ƒç´ ' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' },
                    sorted: { color: '#9c27b0', name: 'å·²æ’åºçš„éƒ¨åˆ†' }
                }
            },
            bubbleSort: {
                name: 'å†’æ³¡æ’åº',
                timeComplexity: 'O(nÂ²)',
                stability: 'ç¨³å®š',
                stabilityReason: 'åªæœ‰å½“å‰é¢çš„å…ƒç´ ä¸¥æ ¼å¤§äºåé¢çš„å…ƒç´ æ—¶æ‰äº¤æ¢ï¼Œç›¸ç­‰å…ƒç´ ä¸ä¼šäº¤æ¢ä½ç½®ï¼Œä¿æŒåŸæœ‰é¡ºåº',
                advantages: 'å®ç°ç®€å•',
                disadvantages: 'æ•ˆç‡ä½ï¼ŒåŸºæœ¬æ·˜æ±°',
                coreIdea: 'ç›¸é‚»æ¯”è¾ƒæ³•',
                description: 'é‡å¤éå†æ•°ç»„ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ å¹¶äº¤æ¢ï¼Œå¤§å…ƒç´ åƒæ³¡æ³¡ä¸€æ ·æµ®åˆ°åé¢',
                steps: [
                    'ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ',
                    'å¦‚æœå‰é¢çš„å…ƒç´ æ¯”åé¢çš„å¤§ï¼Œå°±äº¤æ¢å®ƒä»¬çš„ä½ç½®',
                    'ç»§ç»­æ¯”è¾ƒä¸‹ä¸€å¯¹ç›¸é‚»å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾',
                    'ä¸€è½®å®Œæˆåï¼Œæœ€å¤§çš„å…ƒç´ å·²ç»"å†’æ³¡"åˆ°æœ€å',
                    'é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œæ¯è½®ç¡®å®šä¸€ä¸ªæœ€å¤§å…ƒç´ çš„ä½ç½®'
                ],
                colors: {
                    comparing: { color: '#ff9800', name: 'æ­£åœ¨æ¯”è¾ƒçš„å…ƒç´ ' },
                    swapping: { color: '#f44336', name: 'éœ€è¦äº¤æ¢çš„å…ƒç´ ' },
                    sorted: { color: '#4caf50', name: 'å·²æ’åºçš„éƒ¨åˆ†' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            },
            insertionSort: {
                name: 'ç›´æ¥æ’å…¥æ’åº',
                timeComplexity: 'O(nÂ²)',
                stability: 'ç¨³å®š',
                stabilityReason: 'æ–°å…ƒç´ æ€»æ˜¯æ’å…¥åˆ°å·²æ’åºéƒ¨åˆ†ä¸­ç¬¬ä¸€ä¸ªå¤§äºå®ƒçš„å…ƒç´ å‰é¢ï¼Œç›¸ç­‰å…ƒç´ ä¸ä¼šè·¨è¶Šï¼Œä¿æŒåŸæœ‰é¡ºåº',
                advantages: 'å®ç°ç®€å•ï¼Œé€‚ç”¨äºåŸºæœ¬æœ‰åºæ•°æ®',
                disadvantages: 'æ•ˆç‡ä½ï¼Œæ•°æ®é‡å¤§æ—¶æ€§èƒ½å·®',
                coreIdea: 'æ’å…¥æ³•',
                description: 'å°†æ•°ç»„åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œé€ä¸ªå°†æœªæ’åºå…ƒç´ æ’å…¥åˆ°å·²æ’åºéƒ¨åˆ†çš„æ­£ç¡®ä½ç½®',
                steps: [
                    'å°†ç¬¬ä¸€ä¸ªå…ƒç´ è§†ä¸ºå·²æ’åºåºåˆ—',
                    'å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä»å·²æ’åºåºåˆ—æœ«å°¾å¼€å§‹æ¯”è¾ƒ',
                    'æ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œå°†å…ƒç´ æ’å…¥',
                    'é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½è¢«æ’å…¥åˆ°æ­£ç¡®ä½ç½®',
                    'æœ€ç»ˆå¾—åˆ°å®Œå…¨æ’åºçš„æ•°ç»„'
                ],
                colors: {
                    current: { color: '#f44336', name: 'å½“å‰æ’å…¥çš„å…ƒç´ ' },
                    comparing: { color: '#ff9800', name: 'æ­£åœ¨æ¯”è¾ƒçš„å…ƒç´ ' },
                    sorted: { color: '#4caf50', name: 'å·²æ’åºçš„éƒ¨åˆ†' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            },
            selectionSort: {
                name: 'ç›´æ¥é€‰æ‹©æ’åº',
                timeComplexity: 'O(nÂ²)',
                stability: 'ä¸ç¨³å®š',
                stabilityReason: 'å½“æ‰¾åˆ°æœ€å°å…ƒç´ å¹¶ä¸å½“å‰ä½ç½®äº¤æ¢æ—¶ï¼Œå¯èƒ½ä¼šè·¨è¶Šç›¸ç­‰çš„å…ƒç´ ï¼Œç ´åå®ƒä»¬çš„åŸæœ‰é¡ºåºã€‚ä¾‹å¦‚ï¼š[3a, 2, 3b] â†’ [2, 3b, 3a]',
                advantages: 'äº¤æ¢æ¬¡æ•°å°‘',
                disadvantages: 'æ¯”è¾ƒæ¬¡æ•°å¤š',
                coreIdea: 'é€‰æ‹©æ³•',
                description: 'æ¯æ¬¡ä»æœªæ’åºéƒ¨åˆ†æ‰¾åˆ°æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°å·²æ’åºéƒ¨åˆ†çš„æœ«å°¾',
                steps: [
                    'åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°å…ƒç´ ',
                    'å°†å…¶ä¸ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®',
                    'åœ¨å‰©ä½™æœªæ’åºåºåˆ—ä¸­ç»§ç»­å¯»æ‰¾æœ€å°å…ƒç´ ',
                    'å°†å…¶ä¸ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ä½ç½®',
                    'é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæˆ'
                ],
                colors: {
                    current: { color: '#f44336', name: 'å½“å‰ä½ç½®' },
                    minimum: { color: '#ff9800', name: 'å½“å‰æœ€å°å…ƒç´ ' },
                    comparing: { color: '#ffeb3b', name: 'æ­£åœ¨æ¯”è¾ƒçš„å…ƒç´ ' },
                    sorted: { color: '#4caf50', name: 'å·²æ’åºçš„éƒ¨åˆ†' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            },
            mergeSort: {
                name: 'å½’å¹¶æ’åº',
                timeComplexity: 'O(n log n)',
                stability: 'ç¨³å®š',
                stabilityReason: 'åœ¨åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„æ—¶ï¼Œå½“é‡åˆ°ç›¸ç­‰å…ƒç´ æ—¶ï¼Œæ€»æ˜¯å…ˆå–å·¦å­æ•°ç»„çš„å…ƒç´ ï¼Œä¿è¯äº†ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸å˜',
                advantages: 'æ•ˆç‡ç¨³å®šï¼Œé€‚åˆå¤§æ•°æ®é‡',
                disadvantages: 'ç©ºé—´å¤æ‚åº¦é«˜',
                coreIdea: 'åˆ†æ²»æ³• (Divide and Conquer)',
                description: 'å°†æ•°ç»„åˆ†æˆä¸¤åŠï¼Œé€’å½’æ’åºåå†åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„',
                steps: [
                    'åˆ†è§£ï¼šå°†æ•°ç»„é€’å½’åœ°åˆ†æˆä¸¤åŠï¼Œç›´åˆ°æ¯ä¸ªå­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ',
                    'åˆå¹¶ï¼šå°†ä¸¤ä¸ªæœ‰åºçš„å­æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„',
                    'æ¯”è¾ƒä¸¤ä¸ªå­æ•°ç»„çš„é¦–å…ƒç´ ï¼Œå–è¾ƒå°è€…æ”¾å…¥ç»“æœæ•°ç»„',
                    'é‡å¤æ¯”è¾ƒè¿‡ç¨‹ï¼Œç›´åˆ°æŸä¸ªå­æ•°ç»„ä¸ºç©º',
                    'å°†å‰©ä½™å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°ç»“æœæ•°ç»„ä¸­'
                ],
                colors: {
                    left: { color: '#f44336', name: 'å·¦å­æ•°ç»„' },
                    right: { color: '#ff9800', name: 'å³å­æ•°ç»„' },
                    merging: { color: '#ffeb3b', name: 'æ­£åœ¨åˆå¹¶' },
                    merged: { color: '#4caf50', name: 'å·²åˆå¹¶' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            },
            heapSort: {
                name: 'å †æ’åº',
                timeComplexity: 'O(n log n)',
                stability: 'ä¸ç¨³å®š',
                stabilityReason: 'åœ¨æ„å»ºå †å’Œè°ƒæ•´å †çš„è¿‡ç¨‹ä¸­ï¼Œå…ƒç´ ä¼šè¿›è¡Œé•¿è·ç¦»è·³è·ƒå¼äº¤æ¢ï¼Œç›¸ç­‰å…ƒç´ çš„åŸæœ‰é¡ºåºä¼šè¢«ç ´å',
                advantages: 'æ•ˆç‡é«˜ï¼Œä¸å ç”¨é¢å¤–ç©ºé—´',
                disadvantages: 'å®ç°ç•¥å¤æ‚',
                coreIdea: 'å †ç»“æ„',
                description: 'åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„ï¼Œå°†æ•°ç»„æ„å»ºæˆæœ€å¤§å †ï¼Œç„¶åé€ä¸ªå–å‡ºå †é¡¶å…ƒç´ ',
                steps: [
                    'æ„å»ºæœ€å¤§å †ï¼šå°†æ— åºæ•°ç»„è°ƒæ•´æˆæœ€å¤§å †ç»“æ„',
                    'äº¤æ¢ï¼šå°†å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ä¸æœ«å°¾å…ƒç´ äº¤æ¢',
                    'è°ƒæ•´ï¼šé‡æ–°è°ƒæ•´å †ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³æœ€å¤§å †æ€§è´¨',
                    'é‡å¤ï¼šé‡å¤äº¤æ¢å’Œè°ƒæ•´è¿‡ç¨‹ï¼Œç›´åˆ°å †çš„å¤§å°ä¸º1',
                    'å®Œæˆï¼šæœ€ç»ˆå¾—åˆ°å‡åºæ’åˆ—çš„æ•°ç»„'
                ],
                colors: {
                    root: { color: '#f44336', name: 'å †é¡¶å…ƒç´ ' },
                    adjusting: { color: '#ff9800', name: 'æ­£åœ¨è°ƒæ•´çš„å…ƒç´ ' },
                    heap: { color: '#ffeb3b', name: 'å †ç»“æ„' },
                    sorted: { color: '#4caf50', name: 'å·²æ’åºçš„éƒ¨åˆ†' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            },
            shellSort: {
                name: 'å¸Œå°”æ’åº',
                timeComplexity: 'O(n^1.3) ~ O(nÂ²)',
                stability: 'ä¸ç¨³å®š',
                stabilityReason: 'ç”±äºä½¿ç”¨äº†è¾ƒå¤§çš„å¢é‡è¿›è¡Œè·¨è·ç¦»æ’åºï¼Œç›¸ç­‰å…ƒç´ å¯èƒ½ä¼šè¢«åˆ†åœ¨ä¸åŒçš„å­åºåˆ—ä¸­ï¼Œç ´åå®ƒä»¬çš„åŸæœ‰é¡ºåº',
                advantages: 'æ•ˆç‡é«˜äºæ’å…¥æ’åºï¼Œé€‚ç”¨äºä¸­ç­‰è§„æ¨¡æ•°æ®',
                disadvantages: 'æ€§èƒ½ä¾èµ–å¢é‡åºåˆ—',
                coreIdea: 'åˆ†ç»„æ’å…¥æ³•',
                description: 'æŒ‰ç…§ä¸€å®šé—´éš”å°†æ•°ç»„åˆ†ç»„ï¼Œå¯¹æ¯ç»„è¿›è¡Œæ’å…¥æ’åºï¼Œé€æ­¥ç¼©å°é—´éš”',
                steps: [
                    'é€‰æ‹©å¢é‡åºåˆ—ï¼šé€šå¸¸ä»n/2å¼€å§‹ï¼Œæ¯æ¬¡å‡åŠ',
                    'åˆ†ç»„æ’åºï¼šæŒ‰å½“å‰å¢é‡å°†æ•°ç»„åˆ†æˆè‹¥å¹²ç»„',
                    'æ’å…¥æ’åºï¼šå¯¹æ¯ç»„åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åº',
                    'ç¼©å°å¢é‡ï¼šå°†å¢é‡å‡åŠï¼Œé‡å¤åˆ†ç»„æ’åº',
                    'æœ€ç»ˆæ’åºï¼šå½“å¢é‡ä¸º1æ—¶ï¼Œè¿›è¡Œæœ€åä¸€æ¬¡æ’å…¥æ’åº'
                ],
                colors: {
                    gap: { color: '#f44336', name: 'å½“å‰å¢é‡' },
                    comparing: { color: '#ff9800', name: 'æ­£åœ¨æ¯”è¾ƒçš„å…ƒç´ ' },
                    group: { color: '#ffeb3b', name: 'åŒç»„å…ƒç´ ' },
                    sorted: { color: '#4caf50', name: 'å±€éƒ¨æœ‰åº' },
                    unsorted: { color: '#2196f3', name: 'å¾…å¤„ç†çš„å…ƒç´ ' }
                }
            }
        };
        
        // æ’åºç®—æ³•å¯è§†åŒ–ç±»
        class SortVisualizer {
            constructor() {
                this.array = this.generateRandomArray(12);
                this.originalArray = [...this.array];
                this.steps = [];
                this.currentStep = 0;
                this.isRunning = false;
                this.isPaused = false;
                this.speed = 1000;
                this.intervalId = null;
                this.currentAlgorithm = 'quickSort';
                
                this.initChart();
                this.updateAlgorithmInfo();
            }
            
            generateRandomArray(size) {
                const arr = [];
                for (let i = 0; i < size; i++) {
                    arr.push(Math.floor(Math.random() * 100) + 10);
                }
                return arr;
            }
            
            updateAlgorithmInfo() {
                const info = algorithmsInfo[this.currentAlgorithm];
                
                // æ›´æ–°ç®—æ³•ä¿¡æ¯å¡ç‰‡
                document.getElementById('algorithmInfo').innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                        <div>
                            <h3 style="margin: 0 0 10px 0; font-size: 24px;">${info.name}</h3>
                            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                                <span><strong>æ—¶é—´å¤æ‚åº¦:</strong> ${info.timeComplexity}</span>
                                <span><strong>ç¨³å®šæ€§:</strong> ${info.stability}</span>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #c8f7c5;"><strong>ä¼˜åŠ¿:</strong> ${info.advantages}</div>
                            <div style="color: #ffcccb;"><strong>åŠ£åŠ¿:</strong> ${info.disadvantages}</div>
                        </div>
                    </div>
                `;
                
                // æ›´æ–°ç®—æ³•è¯¦æƒ…
                document.getElementById('algorithmDetails').innerHTML = `
                    <h3>ğŸ§  ${info.name}çš„æ ¸å¿ƒæ€æƒ³ï¼š</h3>
                    <div style="background-color: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                        <h4 style="margin-top: 0; color: #856404;">${info.coreIdea}</h4>
                        <p style="margin: 10px 0; line-height: 1.6;">${info.description}</p>
                    </div>
                    
                    <h4>ğŸ¯ ç®—æ³•æ­¥éª¤è¯¦è§£ï¼š</h4>
                    <ol style="line-height: 1.8;">
                        ${info.steps.map(step => `<li>${step}</li>`).join('')}
                    </ol>
                    
                    <div style="background-color: #d1ecf1; padding: 15px; border-radius: 8px; border-left: 4px solid #17a2b8; margin-top: 20px;">
                        <h4 style="margin-top: 0; color: #0c5460;">âš¡ ç®—æ³•ç‰¹æ€§ï¼š</h4>
                        <p style="margin: 10px 0; line-height: 1.6;">
                            â€¢ <strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š${info.timeComplexity}<br>
                            â€¢ <strong>ç¨³å®šæ€§</strong>ï¼š${info.stability}<br>
                            â€¢ <strong>ä¼˜åŠ¿</strong>ï¼š${info.advantages}<br>
                            â€¢ <strong>åŠ£åŠ¿</strong>ï¼š${info.disadvantages}
                        </p>
                    </div>
                    
                    <div style="background-color: ${info.stability === 'ç¨³å®š' ? '#d4edda' : '#f8d7da'}; padding: 15px; border-radius: 8px; border-left: 4px solid ${info.stability === 'ç¨³å®š' ? '#28a745' : '#dc3545'}; margin-top: 20px;">
                        <h4 style="margin-top: 0; color: ${info.stability === 'ç¨³å®š' ? '#155724' : '#721c24'};">
                            ğŸ” ç¨³å®šæ€§è¯¦è§£ - ${info.stability}
                        </h4>
                        <p style="margin: 10px 0; line-height: 1.6; color: ${info.stability === 'ç¨³å®š' ? '#155724' : '#721c24'};">
                            ${info.stabilityReason}
                        </p>
                        <p style="margin: 10px 0; font-size: 14px; color: #666; line-height: 1.5;">
                            <strong>ç¨³å®šæ€§è¯´æ˜ï¼š</strong>æ’åºç®—æ³•çš„ç¨³å®šæ€§æ˜¯æŒ‡å½“å¾…æ’åºè®°å½•çš„å…³é”®å­—ç›¸åŒæ—¶ï¼Œè¿™äº›è®°å½•åœ¨æ’åºåçš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ã€‚
                        </p>
                    </div>
                `;
                
                // æ›´æ–°é¢œè‰²å›¾ä¾‹
                const colorLegend = document.getElementById('colorLegend');
                colorLegend.innerHTML = '';
                Object.entries(info.colors).forEach(([key, colorInfo]) => {
                    const li = document.createElement('li');
                    li.innerHTML = `<span style="color: ${colorInfo.color}; font-weight: bold;">â— ${colorInfo.name}</span>`;
                    colorLegend.appendChild(li);
                });
            }
            
            initChart() {
                const option = {
                    title: {
                        text: `${algorithmsInfo[this.currentAlgorithm].name}è¿‡ç¨‹å¯è§†åŒ–`,
                        left: 'center',
                        top: 20,
                        textStyle: {
                            fontSize: 24, // å¢åŠ æ ‡é¢˜å­—ä½“å¤§å°
                            fontWeight: 'bold'
                        }
                    },
                    xAxis: {
                        type: 'category',
                        data: this.array.map((_, index) => `ä½ç½®${index}`),
                        axisLabel: {
                            rotate: 45,
                            fontSize: 14, // å¢åŠ åæ ‡è½´æ ‡ç­¾å­—ä½“å¤§å°
                            color: '#333'
                        }
                    },
                    yAxis: {
                        type: 'value',
                        max: 120,
                        axisLabel: {
                            fontSize: 14, // å¢åŠ Yè½´æ ‡ç­¾å­—ä½“å¤§å°
                            color: '#333'
                        }
                    },
                    series: [{
                        type: 'bar',
                        data: this.array.map((value, index) => ({
                            value: value,
                            itemStyle: {
                                color: '#91cc75'
                            }
                        })),
                        label: {
                            show: true,
                            position: 'top',
                            formatter: '{c}',
                            fontSize: 16, // å¢åŠ æ•°æ®æ ‡ç­¾å­—ä½“å¤§å°
                            fontWeight: 'bold',
                            color: '#333' // è®¾ç½®æ ‡ç­¾é¢œè‰²ä¸ºæ·±è‰²
                        },
                        animationDuration: 500
                    }],
                    grid: {
                        left: '8%',
                        right: '8%',
                        top: '15%', // è°ƒæ•´é¡¶éƒ¨è¾¹è·
                        bottom: '15%' // è°ƒæ•´åº•éƒ¨è¾¹è·
                    }
                };
                
                myChart.setOption(option);
            }
            
            // å¿«é€Ÿæ’åºç®—æ³•
            quickSort(arr, left = 0, right = arr.length - 1) {
                if (left >= right) return;
                
                this.steps.push({
                    array: [...arr],
                    action: `å¼€å§‹å¯¹ä½ç½® ${left} åˆ° ${right} è¿›è¡Œåˆ†åŒº`,
                    highlights: { pivot: -1, comparing: -1, partitioned: [], sorted: [] }
                });
                
                const pivotIndex = this.partition(arr, left, right);
                
                this.steps.push({
                    array: [...arr],
                    action: `åˆ†åŒºå®Œæˆï¼ŒåŸºå‡†å…ƒç´  ${arr[pivotIndex]} å·²å°±ä½`,
                    highlights: { pivot: pivotIndex, comparing: -1, partitioned: [pivotIndex], sorted: [] }
                });
                
                this.quickSort(arr, left, pivotIndex - 1);
                this.quickSort(arr, pivotIndex + 1, right);
            }
            
            partition(arr, left, right) {
                const pivotValue = arr[right];
                let i = left - 1;
                
                this.steps.push({
                    array: [...arr],
                    action: `é€‰æ‹©ä½ç½® ${right} çš„å…ƒç´  ${pivotValue} ä½œä¸ºåŸºå‡†`,
                    highlights: { pivot: right, comparing: -1, partitioned: [], sorted: [] }
                });
                
                for (let j = left; j < right; j++) {
                    this.steps.push({
                        array: [...arr],
                        action: `æ¯”è¾ƒå…ƒç´  ${arr[j]} ä¸åŸºå‡† ${pivotValue}`,
                        highlights: { pivot: right, comparing: j, partitioned: [], sorted: [] }
                    });
                    
                    if (arr[j] <= pivotValue) {
                        i++;
                        if (i !== j) {
                            [arr[i], arr[j]] = [arr[j], arr[i]];
                            this.steps.push({
                                array: [...arr],
                                action: `äº¤æ¢ä½ç½® ${i} å’Œ ${j} çš„å…ƒç´ `,
                                highlights: { pivot: right, comparing: -1, partitioned: [], sorted: [] }
                            });
                        }
                    }
                }
                
                [arr[i + 1], arr[right]] = [arr[right], arr[i + 1]];
                return i + 1;
            }
            
            // å†’æ³¡æ’åºç®—æ³•
            bubbleSort(arr) {
                const n = arr.length;
                for (let i = 0; i < n - 1; i++) {
                    for (let j = 0; j < n - i - 1; j++) {
                        this.steps.push({
                            array: [...arr],
                            action: `æ¯”è¾ƒä½ç½® ${j} å’Œ ${j + 1} çš„å…ƒç´ `,
                            highlights: { comparing: [j, j + 1], sorted: Array.from({length: i}, (_, k) => n - 1 - k) }
                        });
                        
                        if (arr[j] > arr[j + 1]) {
                            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                            this.steps.push({
                                array: [...arr],
                                action: `äº¤æ¢ä½ç½® ${j} å’Œ ${j + 1} çš„å…ƒç´ `,
                                highlights: { swapping: [j, j + 1], sorted: Array.from({length: i}, (_, k) => n - 1 - k) }
                            });
                        }
                    }
                }
            }
            
            // ç›´æ¥æ’å…¥æ’åºç®—æ³•
            insertionSort(arr) {
                const n = arr.length;
                for (let i = 1; i < n; i++) {
                    const current = arr[i];
                    let j = i - 1;
                    
                    this.steps.push({
                        array: [...arr],
                        action: `é€‰æ‹©ä½ç½® ${i} çš„å…ƒç´  ${current} è¿›è¡Œæ’å…¥`,
                        highlights: { current: i, sorted: Array.from({length: i}, (_, k) => k) }
                    });
                    
                    while (j >= 0 && arr[j] > current) {
                        this.steps.push({
                            array: [...arr],
                            action: `æ¯”è¾ƒ ${arr[j]} ä¸ ${current}ï¼Œéœ€è¦åç§»`,
                            highlights: { current: i, comparing: j, sorted: Array.from({length: i}, (_, k) => k) }
                        });
                        
                        arr[j + 1] = arr[j];
                        j--;
                        
                        this.steps.push({
                            array: [...arr],
                            action: `å°† ${arr[j + 2]} åç§»ä¸€ä½`,
                            highlights: { current: i, comparing: j + 1, sorted: Array.from({length: i}, (_, k) => k) }
                        });
                    }
                    
                    arr[j + 1] = current;
                    this.steps.push({
                        array: [...arr],
                        action: `å°† ${current} æ’å…¥åˆ°ä½ç½® ${j + 1}`,
                        highlights: { current: j + 1, sorted: Array.from({length: i + 1}, (_, k) => k) }
                    });
                }
            }
            
            // ç›´æ¥é€‰æ‹©æ’åºç®—æ³•
            selectionSort(arr) {
                const n = arr.length;
                for (let i = 0; i < n - 1; i++) {
                    let minIndex = i;
                    
                    this.steps.push({
                        array: [...arr],
                        action: `åœ¨ä½ç½® ${i} åˆ° ${n - 1} ä¸­å¯»æ‰¾æœ€å°å…ƒç´ `,
                        highlights: { current: i, minimum: minIndex, sorted: Array.from({length: i}, (_, k) => k) }
                    });
                    
                    for (let j = i + 1; j < n; j++) {
                        this.steps.push({
                            array: [...arr],
                            action: `æ¯”è¾ƒ ${arr[j]} ä¸å½“å‰æœ€å°å€¼ ${arr[minIndex]}`,
                            highlights: { current: i, minimum: minIndex, comparing: j, sorted: Array.from({length: i}, (_, k) => k) }
                        });
                        
                        if (arr[j] < arr[minIndex]) {
                            minIndex = j;
                            this.steps.push({
                                array: [...arr],
                                action: `æ‰¾åˆ°æ–°çš„æœ€å°å€¼ ${arr[minIndex]} åœ¨ä½ç½® ${minIndex}`,
                                highlights: { current: i, minimum: minIndex, sorted: Array.from({length: i}, (_, k) => k) }
                            });
                        }
                    }
                    
                    if (minIndex !== i) {
                        [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];
                        this.steps.push({
                            array: [...arr],
                            action: `äº¤æ¢ä½ç½® ${i} å’Œ ${minIndex} çš„å…ƒç´ `,
                            highlights: { current: i, sorted: Array.from({length: i + 1}, (_, k) => k) }
                        });
                    }
                }
            }
            
            // å½’å¹¶æ’åºç®—æ³•
            mergeSort(arr, left = 0, right = arr.length - 1) {
                if (left >= right) return;
                
                const mid = Math.floor((left + right) / 2);
                
                this.steps.push({
                    array: [...arr],
                    action: `åˆ†è§£ï¼šå°†ä½ç½® ${left}-${right} åˆ†æˆ ${left}-${mid} å’Œ ${mid + 1}-${right}`,
                    highlights: { left: Array.from({length: mid - left + 1}, (_, i) => left + i), 
                                 right: Array.from({length: right - mid}, (_, i) => mid + 1 + i) }
                });
                
                this.mergeSort(arr, left, mid);
                this.mergeSort(arr, mid + 1, right);
                this.merge(arr, left, mid, right);
            }
            
            merge(arr, left, mid, right) {
                const leftArr = arr.slice(left, mid + 1);
                const rightArr = arr.slice(mid + 1, right + 1);
                let i = 0, j = 0, k = left;
                
                this.steps.push({
                    array: [...arr],
                    action: `å¼€å§‹åˆå¹¶å·¦å­æ•°ç»„ ${leftArr} å’Œå³å­æ•°ç»„ ${rightArr}`,
                    highlights: { merging: Array.from({length: right - left + 1}, (_, idx) => left + idx) }
                });
                
                while (i < leftArr.length && j < rightArr.length) {
                    if (leftArr[i] <= rightArr[j]) {
                        arr[k] = leftArr[i];
                        i++;
                    } else {
                        arr[k] = rightArr[j];
                        j++;
                    }
                    
                    this.steps.push({
                        array: [...arr],
                        action: `å°† ${arr[k]} æ”¾å…¥ä½ç½® ${k}`,
                        highlights: { merged: Array.from({length: k - left + 1}, (_, idx) => left + idx) }
                    });
                    k++;
                }
                
                while (i < leftArr.length) {
                    arr[k] = leftArr[i];
                    this.steps.push({
                        array: [...arr],
                        action: `å°†å‰©ä½™å…ƒç´  ${arr[k]} æ”¾å…¥ä½ç½® ${k}`,
                        highlights: { merged: Array.from({length: k - left + 1}, (_, idx) => left + idx) }
                    });
                    i++;
                    k++;
                }
                
                while (j < rightArr.length) {
                    arr[k] = rightArr[j];
                    this.steps.push({
                        array: [...arr],
                        action: `å°†å‰©ä½™å…ƒç´  ${arr[k]} æ”¾å…¥ä½ç½® ${k}`,
                        highlights: { merged: Array.from({length: k - left + 1}, (_, idx) => left + idx) }
                    });
                    j++;
                    k++;
                }
            }
            
            // å †æ’åºç®—æ³•
            heapSort(arr) {
                const n = arr.length;
                
                // æ„å»ºæœ€å¤§å †
                for (let i = Math.floor(n / 2) - 1; i >= 0; i--) {
                    this.heapify(arr, n, i);
                }
                
                this.steps.push({
                    array: [...arr],
                    action: 'æ„å»ºæœ€å¤§å †å®Œæˆ',
                    highlights: { heap: Array.from({length: n}, (_, i) => i) }
                });
                
                // é€ä¸ªæå–å…ƒç´ 
                for (let i = n - 1; i > 0; i--) {
                    [arr[0], arr[i]] = [arr[i], arr[0]];
                    
                    this.steps.push({
                        array: [...arr],
                        action: `å°†å †é¡¶å…ƒç´  ${arr[i]} ç§»åˆ°ä½ç½® ${i}`,
                        highlights: { root: 0, sorted: Array.from({length: n - i}, (_, k) => i + k) }
                    });
                    
                    this.heapify(arr, i, 0);
                }
            }
            
            heapify(arr, n, i) {
                let largest = i;
                let left = 2 * i + 1;
                let right = 2 * i + 2;
                
                if (left < n && arr[left] > arr[largest]) {
                    largest = left;
                }
                
                if (right < n && arr[right] > arr[largest]) {
                    largest = right;
                }
                
                if (largest !== i) {
                    this.steps.push({
                        array: [...arr],
                        action: `è°ƒæ•´å †ï¼šäº¤æ¢ä½ç½® ${i} å’Œ ${largest}`,
                        highlights: { adjusting: [i, largest] }
                    });
                    
                    [arr[i], arr[largest]] = [arr[largest], arr[i]];
                    this.heapify(arr, n, largest);
                }
            }
            
            // å¸Œå°”æ’åºç®—æ³•
            shellSort(arr) {
                const n = arr.length;
                let gap = Math.floor(n / 2);
                
                while (gap > 0) {
                    this.steps.push({
                        array: [...arr],
                        action: `ä½¿ç”¨å¢é‡ ${gap} è¿›è¡Œåˆ†ç»„æ’åº`,
                        highlights: { gap: gap }
                    });
                    
                    for (let i = gap; i < n; i++) {
                        const temp = arr[i];
                        let j = i;
                        
                        this.steps.push({
                            array: [...arr],
                            action: `å¯¹é—´éš”ä¸º ${gap} çš„å…ƒç´ è¿›è¡Œæ’å…¥æ’åº`,
                            highlights: { comparing: [i], group: this.getGroupIndices(i, gap, n) }
                        });
                        
                        while (j >= gap && arr[j - gap] > temp) {
                            arr[j] = arr[j - gap];
                            j -= gap;
                            
                            this.steps.push({
                                array: [...arr],
                                action: `å°†å…ƒç´ åç§» ${gap} ä½`,
                                highlights: { comparing: [j], group: this.getGroupIndices(j, gap, n) }
                            });
                        }
                        
                        arr[j] = temp;
                    }
                    
                    gap = Math.floor(gap / 2);
                }
            }
            
            getGroupIndices(index, gap, n) {
                const group = [];
                const start = index % gap;
                for (let i = start; i < n; i += gap) {
                    group.push(i);
                }
                return group;
            }
            
            // æ›´æ–°æ’åºç®—æ³•
            changeAlgorithm(algorithm) {
                this.stop();
                this.currentAlgorithm = algorithm;
                this.updateAlgorithmInfo();
                this.initChart();
                document.getElementById('status').textContent = 'é€‰æ‹©æ’åºç®—æ³•å¹¶ç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º';
            }
            
            updateChart(step) {
                const info = algorithmsInfo[this.currentAlgorithm];
                const colors = step.array.map((_, index) => {
                    const highlights = step.highlights || {};
                    
                    if (this.currentAlgorithm === 'quickSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (index === highlights.pivot) return info.colors.pivot.color;
                        if (index === highlights.comparing) return info.colors.comparing.color;
                        if (highlights.partitioned && highlights.partitioned.includes(index)) return info.colors.partitioned.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'bubbleSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (highlights.swapping && highlights.swapping.includes(index)) return info.colors.swapping.color;
                        if (highlights.comparing && highlights.comparing.includes(index)) return info.colors.comparing.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'insertionSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (index === highlights.current) return info.colors.current.color;
                        if (index === highlights.comparing) return info.colors.comparing.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'selectionSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (index === highlights.current) return info.colors.current.color;
                        if (index === highlights.minimum) return info.colors.minimum.color;
                        if (index === highlights.comparing) return info.colors.comparing.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'mergeSort') {
                        if (highlights.merged && highlights.merged.includes(index)) return info.colors.merged.color;
                        if (highlights.merging && highlights.merging.includes(index)) return info.colors.merging.color;
                        if (highlights.left && highlights.left.includes(index)) return info.colors.left.color;
                        if (highlights.right && highlights.right.includes(index)) return info.colors.right.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'heapSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (index === highlights.root) return info.colors.root.color;
                        if (highlights.adjusting && highlights.adjusting.includes(index)) return info.colors.adjusting.color;
                        if (highlights.heap && highlights.heap.includes(index)) return info.colors.heap.color;
                        return info.colors.unsorted.color;
                    } else if (this.currentAlgorithm === 'shellSort') {
                        if (highlights.sorted && highlights.sorted.includes(index)) return info.colors.sorted.color;
                        if (highlights.comparing && highlights.comparing.includes(index)) return info.colors.comparing.color;
                        if (highlights.group && highlights.group.includes(index)) return info.colors.group.color;
                        return info.colors.unsorted.color;
                    }
                    
                    return '#2196f3';
                });
                
                const option = {
                    title: {
                        text: `${info.name}è¿‡ç¨‹å¯è§†åŒ–`,
                        textStyle: {
                            fontSize: 24,
                            fontWeight: 'bold'
                        }
                    },
                    series: [{
                        data: step.array.map((value, index) => ({
                            value: value,
                            itemStyle: {
                                color: colors[index]
                            }
                        })),
                        label: {
                            show: true,
                            position: 'top',
                            formatter: '{c}',
                            fontSize: 16,
                            fontWeight: 'bold',
                            color: '#333'
                        }
                    }]
                };
                
                myChart.setOption(option);
                document.getElementById('status').textContent = step.action;
            }
            
            start() {
                if (this.isRunning) return;
                
                this.array = [...this.originalArray];
                this.steps = [];
                this.currentStep = 0;
                
                // æ ¹æ®å½“å‰ç®—æ³•æ‰§è¡Œç›¸åº”çš„æ’åº
                if (this.currentAlgorithm === 'quickSort') {
                    this.quickSort([...this.array]);
                } else if (this.currentAlgorithm === 'bubbleSort') {
                    this.bubbleSort([...this.array]);
                } else if (this.currentAlgorithm === 'insertionSort') {
                    this.insertionSort([...this.array]);
                } else if (this.currentAlgorithm === 'selectionSort') {
                    this.selectionSort([...this.array]);
                } else if (this.currentAlgorithm === 'mergeSort') {
                    this.mergeSort([...this.array]);
                } else if (this.currentAlgorithm === 'heapSort') {
                    this.heapSort([...this.array]);
                } else if (this.currentAlgorithm === 'shellSort') {
                    this.shellSort([...this.array]);
                }
                
                // æ·»åŠ å®Œæˆæ­¥éª¤
                if (this.steps.length > 0) {
                    this.steps.push({
                        array: this.steps[this.steps.length - 1].array,
                        action: 'æ’åºå®Œæˆï¼',
                        highlights: { sorted: Array.from({length: this.array.length}, (_, i) => i) }
                    });
                }
                
                this.isRunning = true;
                this.isPaused = false;
                this.play();
                
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                document.getElementById('resetBtn').disabled = true;
            }
            
            play() {
                if (this.currentStep < this.steps.length && !this.isPaused) {
                    this.updateChart(this.steps[this.currentStep]);
                    this.currentStep++;
                    
                    this.intervalId = setTimeout(() => {
                        if (!this.isPaused) {
                            this.play();
                        }
                    }, this.speed);
                } else if (this.currentStep >= this.steps.length) {
                    this.stop();
                }
            }
            
            pause() {
                this.isPaused = true;
                if (this.intervalId) {
                    clearTimeout(this.intervalId);
                }
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('resumeBtn').disabled = false;
            }
            
            resume() {
                this.isPaused = false;
                this.play();
                document.getElementById('pauseBtn').disabled = false;
                document.getElementById('resumeBtn').disabled = true;
            }
            
            stop() {
                this.isRunning = false;
                this.isPaused = false;
                if (this.intervalId) {
                    clearTimeout(this.intervalId);
                }
                
                document.getElementById('startBtn').disabled = false;
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('resumeBtn').disabled = true;
                document.getElementById('resetBtn').disabled = false;
                
                if (this.currentStep >= this.steps.length) {
                    document.getElementById('status').textContent = 'æ’åºå®Œæˆï¼';
                }
            }
            
            reset() {
                this.stop();
                this.array = this.generateRandomArray(12);
                this.originalArray = [...this.array];
                this.steps = [];
                this.currentStep = 0;
                this.initChart();
                document.getElementById('status').textContent = 'é€‰æ‹©æ’åºç®—æ³•å¹¶ç‚¹å‡»"å¼€å§‹æ’åº"æŒ‰é’®å¼€å§‹æ¼”ç¤º';
            }
            
            changeSpeed() {
                const speeds = [2000, 1500, 1000, 500, 300];
                const speedNames = ['å¾ˆæ…¢', 'æ…¢', 'æ­£å¸¸', 'å¿«', 'å¾ˆå¿«'];
                const currentIndex = speeds.indexOf(this.speed);
                const nextIndex = (currentIndex + 1) % speeds.length;
                this.speed = speeds[nextIndex];
                
                document.getElementById('speedBtn').textContent = `é€Ÿåº¦: ${speedNames[nextIndex]}`;
            }
        }
        
        // åˆ›å»ºæ’åºå¯è§†åŒ–å®ä¾‹
        const visualizer = new SortVisualizer();
        
        // å·¦ä¾§èœå•ç‚¹å‡»äº‹ä»¶
        document.getElementById('algorithmList').addEventListener('click', (e) => {
            const item = e.target.closest('.algorithm-item');
            if (item) {
                // ç§»é™¤æ‰€æœ‰activeç±»
                document.querySelectorAll('.algorithm-item').forEach(el => el.classList.remove('active'));
                // æ·»åŠ activeç±»åˆ°å½“å‰ç‚¹å‡»é¡¹
                item.classList.add('active');
                
                // è·å–ç®—æ³•ç±»å‹å¹¶åˆ‡æ¢
                const algorithm = item.getAttribute('data-algorithm');
                visualizer.changeAlgorithm(algorithm);
            }
        });
        
        // æŒ‰é’®äº‹ä»¶å¤„ç†
        document.getElementById('startBtn').addEventListener('click', () => {
            visualizer.start();
        });
        
        document.getElementById('pauseBtn').addEventListener('click', () => {
            visualizer.pause();
        });
        
        document.getElementById('resumeBtn').addEventListener('click', () => {
            visualizer.resume();
        });
        
        document.getElementById('resetBtn').addEventListener('click', () => {
            visualizer.reset();
        });
        
        document.getElementById('speedBtn').addEventListener('click', () => {
            visualizer.changeSpeed();
        });
        
        // å“åº”å¼å¤„ç†
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>
